<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uso Compartido</title>
    <link rel="manifest" href="manifest.json">
    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
    <link href="recursos/flow.css" rel="stylesheet" />
    <style>
        /* #upload2{
            background-color: rgb(201, 74, 74);
        } */

        /* .drop-area {
            border: 2px dashed #ccc;
            border-radius: 20px;
            font-family: sans-serif;
            margin: 100px auto;
            padding: 20px;
        } */
        .drop-area {
            border:3px dashed #e74694;
            border-radius: 10px;
            /* width: 480px; */
            font-family: sans-serif;
            margin: 2rem auto;
            /* padding: 10px; */
        }
        .drop-area.highlight {
            border-color: red;
            /* background-color: gray; */
        }
        button#theme-toggle {
            position: absolute;
            left: 1rem;
            top: 1rem;
            border: 2px dashed;
            border-radius: 50%;
        }
        .h-full {
            height: 100vh!important;
        }
        button#botonayuda {
            background-color: #e74694;
            border-radius: 50%;
            border: 2px dashed;
        }

        .flex.items-center.wrap {
            flex-wrap: wrap;
            grid-gap: 0.6rem;
        }


        .color1, .color2, .color3, .color4, .colorHombre, .color5{
            padding: 0.3rem 0.5rem;
            border-radius: 10px;
        }

        .color1{
            background-color: #2557d6;
        }

        .color2{
            background-color: #e74694;
        }

        .color3{
            background-color: white;
        }

        .color4{
            background-color:cadetblue;
        }

        .color5{
            background-color:chocolate;
        }


        .colorHombre{
            background-color: black;
        }

    </style>
</head>
<body>
    <section class="flex flex-col items-center justify-center p-4">
        <button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
            <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
            <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
        </button>

        <button data-modal-target="defaultModal" data-modal-toggle="defaultModal" id="botonayuda" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="white" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"></path></svg>
        </button>

    
        <div class="flex items-center justify-center w-full drop-area" id="upload2">
            <label for="file2" class="flex flex-col items-center justify-center w-full h-64    rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700  ">
                <div class="flex flex-col items-center justify-center pt-5 pb-6"> 
                    <img class="w-20 h-20 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500 mb-3" id="imgfil" src="img/male.png" alt="Bordered avatar">
                    <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click para subir ZIP</span> o arrastrar y soltar ZIP</p>
                    <h5 class="mb-2 text-xl font-semibold tracking-tight text-gray-900 dark:text-white">Encuestadora Principal</h5>

                    <p class="text-xs text-gray-500 dark:text-gray-400">Elegir archivo</p>
    
                    <div class="flex space-x-4 mt-6">
                        <svg class="w-6 h-6 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>
                        <span id="nombreArch" class="dark:text-white"></span>
                    </div>
                </div>
                <!-- <input id="dropzone-file" type="file" class="" /> -->
                <input type="file" id="file2" accept=".zip" class="hidden">
            </label>
        </div> 
    
        <!-- <hr> -->
    
        <!-- <div id="drop-area">
            <form class="my-form">
                <p>Upload multiple files with the file dialog or by dragging and dropping images onto the dashed region</p>
                <input type="file" id="fileElem" multiple accept="image/*" onchange="handleFiles(this.files)">
                <label class="button" for="fileElem">Select some files</label>
            </form> 
        </div> -->
    
        <!-- <form id="upload2">
            <label for="file2">ARCHIVO ENCUESTADORA PRINCIPAL</label>
            <input type="file" id="file2" accept=".zip">
        
        </form> -->
    
        
    
        <hr>
    
    
        <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
            <div class="relative">
                <img class="w-10 h-10 rounded-full" id="imgfil2" src="img/male.png" alt="">
                <span class="top-0 left-7 absolute  w-3.5 h-3.5 bg-green-400 border-2 border-white dark:border-gray-800 rounded-full"></span>
            </div>
            <a href="#">
                <h5 class="mb-2 text-xl font-semibold tracking-tight text-gray-900 dark:text-white">Encuestadora de Apoyo</h5>
            </a>
            <ul class="max-w-md space-y-1 text-gray-500 list-inside dark:text-gray-400 mb-3">
                <li class="flex items-center">
                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    Subir archivo .ZIP de la encuestadora de Apoyo.
                </li>
                <li class="flex items-center">
                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    Seleccionar vivienda.
                </li>
                <li class="flex items-center">
                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    Seleccionar MEF a compartir a la encuestadora principal.
                </li>
                
            </ul>
            <!-- <form id="upload" class="mb-4">
                <label for="file"></label>
                <input type="file" id="file" accept=".zip" class="mb-3 block w-full text-lg text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400">
            </form> -->
        
            <!-- <div id="caja" class="mb-4"></div>
            <div id="cajacheck" class="mb-4"></div> -->
        
            <div id="codigo"></div>

            <ul class="w-full text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                <li class="w-full px-4 py-2  border-gray-200 rounded-t-lg dark:border-gray-600">
                    <form id="upload" class="">
                        <label for="file"></label>
                        <input type="file" id="file" accept=".zip" class=" block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400">
                    </form>
                </li>
                <li class="w-full px-4 py-2  border-gray-200 dark:border-gray-600">
                    <div id="caja" class="mb-2 mt-2"></div>
                </li>
                <li class="w-full px-4 py-2  border-gray-200 dark:border-gray-600">
                    <div id="cajacheck" class="mb-2 mt-2"></div>
                </li>
            </ul>
        </div>

        
    
    </section>


    <!-- Main modal -->

    <div id="defaultModal" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] md:h-full">
        <div class="relative w-full h-full max-w-2xl md:h-auto">
            <!-- Modal content -->
            <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                <!-- Modal header -->
                <div class="flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                        Consideraciones antes de subir archivos .ZIP
                    </h3>
                    <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="defaultModal">
                        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                        <span class="sr-only">Close modal</span>
                    </button>
                </div>
                <!-- Modal body -->
                <div class="p-6 space-y-6">
                    <ol class="relative border-l border-gray-200 dark:border-gray-700">                  
                        <li class="mb-10 ml-6">            
                            <span class="absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900">
                                <svg aria-hidden="true" class="w-3 h-3 text-blue-800 dark:text-blue-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                            </span>
                            <h3 class="flex items-center mb-1 text-lg font-semibold text-gray-900 dark:text-white">Encuestadora Principal<span class="bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ml-3">Principal</span></h3>
                            <time class="block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"></time>

                            <ul class="max-w-md space-y-1 text-gray-500 list-inside dark:text-gray-400 mb-3">
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Apertura la vivienda 
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Finaliza el cuestionario del HOGAR. 
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Exporta su información (El exportado generado lo va a importar la encuestadora de Apoyo).
                                </li>
                                <!-- <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Inicia el cuestionario individual <span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300 ml-3">MEF 1</span>
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Cuando finaliza el cuestionario individual exporta su información.
                                    <br>
                                </li> -->
                                
                            </ul>
                        </li>
                        <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900">
                                <svg aria-hidden="true" class="w-3 h-3 text-blue-800 dark:text-blue-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                            </span>
                            <h3 class="mb-1 text-lg font-semibold text-gray-900 dark:text-white">Encuestadora de Apoyo</h3>
                            <time class="block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"></time>
                            

                            <ul class="max-w-lg space-y-1 text-gray-500 list-inside dark:text-gray-400 mb-3">
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Si la encuestadora de Apoyo ya contaba con viviendas trabajadas 1° exporta su información. 
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Importa la información de la encuestadora Principal.  
                                </li>
                                
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Inicia el cuestionario individual <span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300 ml-3">MEF 2</span>
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Cuando finaliza el cuestionario individual exporta su información.
                                </li>
                                
                            </ul>
                        </li>
                        <!-- <li class="ml-6">
                            <span class="absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900">
                                <svg aria-hidden="true" class="w-3 h-3 text-blue-800 dark:text-blue-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                            </span>
                            <h3 class="mb-1 text-lg font-semibold text-gray-900 dark:text-white">Flowbite Library v1.2.2</h3>
                            <time class="block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500">Released on December 2nd, 2021</time>
                            <p class="text-base font-normal text-gray-500 dark:text-gray-400">Get started with dozens of web components and interactive elements built on top of Tailwind CSS.</p>
                            
                            <ul class="max-w-md space-y-1 text-gray-500 list-inside dark:text-gray-400 mb-3">
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Subir archivo .ZIP de la encuestadora de Apoyo.
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Seleccionar vivienda.
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Seleccionar MEF a compartir a la encuestadora principal.
                                </li>
                                
                            </ul>
                        </li> -->
                    </ol>
                </div>
                <!-- Modal footer -->
                <div class="flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600">
                    <button data-modal-hide="defaultModal" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Cerrar</button>
                    <!-- <button data-modal-hide="defaultModal" type="button" class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">Decline</button> -->
                </div>
            </div>
        </div>
    </div>


    <script src="recursos/flow.js"></script>

    <script src="recursos/filesaver.js"></script>
    <script src="recursos/jszip.js"></script>

    <script src="recursos/xml.js"></script>
    <script type="module">

        let dropArea = document.querySelector('.drop-area')


        ;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false)
        })
        
        function preventDefaults (e) {
            e.preventDefault()
            e.stopPropagation()
        }



        ;['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false)
        })
        
        ;['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false)
        })
        
        function highlight(e) {
            dropArea.classList.add('highlight')
        }
        
        function unhighlight(e) {
            dropArea.classList.remove('highlight')
        }



        dropArea.addEventListener('drop', handleDrop, false)

        function handleDrop(e) {
            let dt = e.dataTransfer
            let files = dt.files
            if(files[0].type.includes('zip')){
                handleFiles(files)    
            }else{
                alert('Solo permitido archivos .ZIP')
            }
            // console.log(files[0].type.includes('zip'))
            // handleFiles(files)
        }

        function handleFiles(filesa) {
            //console.log(filesa[0].name)

            document.querySelector('#nombreArch').textContent = filesa[0].name;

            var filename3 = filesa[0].name;
            document.querySelector('#imgfil').setAttribute('src', `https://iinei.inei.gob.pe/iinei/asistencia/fotos/${filename3.substring(8,filename3.indexOf("."))}.jpg`)
            // Create a new FileReader() object
            let reader = new FileReader();
            
            //console.log(filename3.substring(8,filename3.indexOf(".")))
            // Setup the callback event to run when the file is read
            reader.onload = function(ev) {
                JSZip.loadAsync(ev.target.result).then(function(zip) {
                    zip.file(`${filename3.substring(0,filename3.indexOf("."))}.xml`).async("string").then(function(data) {
                        // data is a string
                        // TODO Your code goes here!

                        const json = xml2json(data, { spaces: 2, compact: true/*,nativeType: true*/});
                        jsonFinal = JSON.parse(json).ENDES
                        console.error(jsonFinal)
                        
                    })
                }).catch(function(err) {
                    console.error("Failed to open", fileFinal, " as ZIP file:", err);
                })
            };
            reader.onerror = function(err) {
                console.error("Failed to read file", err);
            }
            reader.readAsArrayBuffer(filesa[0]);

            nomfinal = `${filename3.substring(0,filename3.indexOf("."))}.xml`
            //([...files]).forEach(uploadFile)
        }

        ////////////////////////////////////////////////////////////////////////
        let nomfinal = ''
       
        let form = document.querySelector('#upload');
        let file = document.querySelector('#file');
        let json2
        //////////////////////////////////////////////////////////////////
        let formFinal = document.querySelector('#upload2');
        let fileFinal = document.querySelector('#file2');
        let jsonFinal

        formFinal.addEventListener('change', handleSubmit2);

        function handleSubmit2 (event) {
            // Stop the form from reloading the page
            event.preventDefault();
            // If there's no file, do nothing
            if (!fileFinal.value.length) return;

            var filename3 = fileFinal.files[0].name;
            document.querySelector('#imgfil').setAttribute('src', `https://iinei.inei.gob.pe/iinei/asistencia/fotos/${filename3.substring(8,filename3.indexOf("."))}.jpg`)

            document.querySelector('#nombreArch').textContent = fileFinal.files[0].name;

            // Create a new FileReader() object
            let reader = new FileReader();
            
            console.log(fileFinal.files)
            // Setup the callback event to run when the file is read
            reader.onload = function(ev) {
                JSZip.loadAsync(ev.target.result).then(function(zip) {
                    zip.file(`${filename3.substring(0,filename3.indexOf("."))}.xml`).async("string").then(function(data) {
                        // data is a string
                        // TODO Your code goes here!

                        const json = xml2json(data, { spaces: 2, compact: true/*,nativeType: true*/});
                        jsonFinal = JSON.parse(json).ENDES
                        console.error(jsonFinal)
                        
                    })
                }).catch(function(err) {
                    console.error("Failed to open", fileFinal, " as ZIP file:", err);
                })
            };
            reader.onerror = function(err) {
                console.error("Failed to read file", err);
            }
            reader.readAsArrayBuffer(fileFinal.files[0]);

            nomfinal = `${filename3.substring(0,filename3.indexOf("."))}.xml`
        }

        


        // function handleSubmit2 (event) {
        //     // Stop the form from reloading the page
        //     event.preventDefault();
        //     // If there's no file, do nothing
        //     if (!fileFinal.value.length) return;
        //     // Create a new FileReader() object
        //     let reader = new FileReader();
        //     // Setup the callback event to run when the file is read
        //     reader.onload = logFile2;
        //     // Read the file
        //     reader.readAsText(fileFinal.files[0]);

        //     nomfinal = fileFinal.files[0].name

            
        // }


        // function logFile2 (event) {
        //     let str = event.target.result;
        //     const json = xml2json(str, { spaces: 2, compact: true/*,nativeType: true*/});
        //     jsonFinal = JSON.parse(json).ENDES
        //     console.error(jsonFinal)
        // }


        ///////////////////////////////////////////////////////////////
        form.addEventListener('change', handleSubmit);

        function handleSubmit (event) {

        // Stop the form from reloading the page
        event.preventDefault();

        // If there's no file, do nothing
        if (!file.value.length) return;

        let filename3 = file.files[0].name;
        document.querySelector('#imgfil2').setAttribute('src', `https://iinei.inei.gob.pe/iinei/asistencia/fotos/${filename3.substring(8,filename3.indexOf("."))}.jpg`)
        console.log(filename3)
        
        // Create a new FileReader() object
        let reader = new FileReader();

        // Setup the callback event to run when the file is read
        reader.onload = function(ev) {
            JSZip.loadAsync(ev.target.result).then(function(zip) {
                zip.file(`${filename3.substring(0,filename3.indexOf("."))}.xml`).async("string").then(function(data) {
                    // data is a string
                    // TODO Your code goes here!

                    const json = xml2json(data, { spaces: 2, compact: true/*,nativeType: true*/});

                    //SE GUARDA DENTRO DE JSON2 el formato convertido del xml, para trabajarlo
                    json2 = JSON.parse(json).ENDES
                    console.error(json2)
                    

                    console.log(json2)

                    const caja = document.querySelector("#caja")
                    let mapa = ''

                    //verifica si tiene solo 1 vivienda
                    if(json2.Marco._attributes.cantidad == 1){
                        //alert('solo tienes una variables')
                        //se almacena dentro de mapa el html de todas las viviendas, ademas se coloca como value el id de 
                        mapa = `<option value="${json2.Marco.T_MARCO.ID._text}">${json2.Marco.T_MARCO.NSELV._text}</option>`
                    }else{
                        mapa = json2.Marco.T_MARCO.map(el=>`<option value="${el.ID._text}">${el.NSELV._text}</option>`).join('')
                    }

                    document.querySelector('#caja').innerHTML = ''
                    document.querySelector('#cajacheck').innerHTML = ''

                    let selc = document.createElement('select');
                    selc.setAttribute('id', 'seleccionar')
                    selc.setAttribute('class', 'bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500')

                    selc.innerHTML = mapa

                    caja.insertAdjacentElement('beforeend',selc)
                    document.querySelector("#seleccionar").insertAdjacentHTML('afterbegin',`<option selected>Seleccione la vivienda</option>`)

                })
            }).catch(function(err) {
                console.error("Failed to open", file, " as ZIP file:", err);
            })
        };
        reader.onerror = function(err) {
            console.error("Failed to read file", err);
        }
        reader.readAsArrayBuffer(file.files[0]);
       
        //console.log(file.files[0])

        }


        document.querySelector('#caja').addEventListener('change', e=>{

            document.querySelector('#cajacheck').innerHTML = ''
            
            //console.log(e.target.value, json2)
            let filtro = ''
            let mapcheck = ''

            if(json2?.Hogar?._attributes.cantidad == 1 ){

                let existe = json2?.Hogar?.T_05_DIG_HOGAR.ID._text == e.target.value
                
                if(existe){
                    let filtroMujerIndi = json2.Seccion01.T_05_DIG_SECCION01.filter(el=>el.ID._text == e.target.value 
                    && el.HOGAR_ID._text == json2?.Hogar?.T_05_DIG_HOGAR.HOGAR_ID._text
                    &&  el.QH07._text >= 12 &&  el.QH07._text <= 49 && el.QH06._text == 2 )


                    let filtroHombreIndi = json2?.Seccion01?.T_05_DIG_SECCION01?.filter(el=>el.ID._text == e.target.value 
                    && el.HOGAR_ID._text == json2?.Hogar?.T_05_DIG_HOGAR.HOGAR_ID._text
                    /*&& el.QH06._text == 1*/  && el.PERSONA_ID._text == json2?.Hogar?.T_05_DIG_HOGAR.NRO_INFO_S._text )



                    console.log("solo 1 hogar.....", existe, filtroMujerIndi)



                    if(filtroMujerIndi.length > 0){
                        console.log("5kkk mujer")
                        mapcheck = filtroMujerIndi.flat().map(el => `<label class="color${el.HOGAR_ID._text} ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"><input type="checkbox" id="${el.PERSONA_ID._text}" value="${el.ID._text}" data-hogar="${el.HOGAR_ID._text}" data-infosalud="${json2.Hogar.T_05_DIG_HOGAR.NRO_INFO_S._text}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"> 
                        ${el.QH02_1._text} - Hogar (${el.HOGAR_ID._text})</label>`).join('')
                        
                    }else if(filtroHombreIndi.length == 1){
                        console.log("no hay mef para individual 1 hombre")
                        mapcheck = filtroHombreIndi.flat().map(el => `<label class="color${el.HOGAR_ID._text} ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"><input type="checkbox" id="${el.PERSONA_ID._text}" value="${el.ID._text}" data-hogar="${el.HOGAR_ID._text}" data-infosalud="${json2.Hogar.T_05_DIG_HOGAR.NRO_INFO_S._text}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"> 
                        ${el.QH02_1._text} - Hogar (${el.HOGAR_ID._text})</label>`).join('')
                    }


                    
                }
                

            }else{

                let filtroHogares = json2?.Hogar?.T_05_DIG_HOGAR.filter(el=> el.ID._text == e.target.value)

                if(filtroHogares.length == 1){
                    console.log("solo 1 hogar")

                    let filtroMujerIndi = json2?.Seccion01?.T_05_DIG_SECCION01?.filter(el=>el.ID._text == e.target.value 
                    && el.HOGAR_ID._text == filtroHogares[0].HOGAR_ID._text
                    &&  el.QH07._text >= 12 &&  el.QH07._text <= 49 && el.QH06._text == 2 )


                    let filtroHombreIndi = json2?.Seccion01?.T_05_DIG_SECCION01?.filter(el=>el.ID._text == e.target.value 
                    && el.HOGAR_ID._text == filtroHogares[0].HOGAR_ID._text
                    /*&& el.QH06._text == 1*/  && el.PERSONA_ID._text == filtroHogares[0].NRO_INFO_S._text )

                    console.log("hombre", filtroHombreIndi, filtroHogares)


                    console.log("solo hogarmmmm", filtroMujerIndi)

                    if(filtroMujerIndi.length > 0){
                        console.log("5kkk")
                        mapcheck = filtroMujerIndi.flat().map(el => `<label class="color${el.HOGAR_ID._text} ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"><input type="checkbox" id="${el.PERSONA_ID._text}" value="${el.ID._text}" data-hogar="${el.HOGAR_ID._text}" data-infosalud="${filtroHogares[0].NRO_INFO_S._text}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"> 
                        ${el.QH02_1._text} - Hogar (${el.HOGAR_ID._text})</label>`).join('')
                        
                    }else if(filtroHombreIndi.length == 1){
                        console.log("no hay mef para individual 1 hombre")
                        mapcheck = filtroHombreIndi.flat().map(el => `<label class="color${el.HOGAR_ID._text} ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"><input type="checkbox" id="${el.PERSONA_ID._text}" value="${el.ID._text}" data-hogar="${el.HOGAR_ID._text}" data-infosalud="${filtroHogares[0].NRO_INFO_S._text}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"> 
                        ${el.QH02_1._text} - Hogar (${el.HOGAR_ID._text})</label>`).join('')
                    }/*else{
                        console.log("no hay mef para individual mas de 1 hombre")
                        mapcheck = filtroHombreIndi.flat().map(el => `<label class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"><input type="checkbox" id="${el.PERSONA_ID._text}" value="${el.ID._text}" data-hogar="${el.HOGAR_ID._text}" data-infosalud="${filtroHogares[0].NRO_INFO_S._text}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"> 
                        ${el.QH02_1._text}</label>`).join('')
                    }*/

                    

                }else{
                    console.log("mas de 1 hogar...")

                        let arr = []
                        let arrhom = []

                        filtroHogares.forEach(ele => {
                            let filtroMujerIndi = json2?.Seccion01?.T_05_DIG_SECCION01?.filter(el=>el.ID._text == e.target.value 
                            && el.HOGAR_ID._text == ele.HOGAR_ID._text
                            &&  el.QH07._text >= 12 &&  el.QH07._text <= 49 && el.QH06._text == 2 )

                            filtroMujerIndi.forEach(eli => {
                                eli.infosalud = ele.NRO_INFO_S._text
                                eli.color = `color${ele.HOGAR_ID._text}`
                            });

                            arr.push(filtroMujerIndi)

                        });



                        filtroHogares.forEach(ele => {
                            let filtroHombreIndi = json2?.Seccion01?.T_05_DIG_SECCION01?.filter(el=>el.ID._text == e.target.value 
                            && el.HOGAR_ID._text == ele.HOGAR_ID._text
                            && el.PERSONA_ID._text == ele.NRO_INFO_S._text )

                            filtroHombreIndi.forEach(eli => {
                                eli.infosalud = ele.NRO_INFO_S._text
                                eli.color = `color${ele.HOGAR_ID._text}`
                            });

                            arrhom.push(filtroHombreIndi)

                        });

                        let arrfinal = [arr.flat(), arrhom.flat()]


                        // Quitar duplicados
                        var arraySinDuplicados = arrfinal.flat().filter((objeto, indice, self) =>
                        indice === self.findIndex((o) =>
                            JSON.stringify(o) === JSON.stringify(objeto)
                        )
                        );

                        // Ordenar por el parámetro "valor"
                        arraySinDuplicados.sort((a, b) => a.HOGAR_ID._text - b.HOGAR_ID._text);

                        // Mostrar el resultado
                        console.log("sin duplicados y ordenados",arraySinDuplicados);

                        let arrcriterio = []

                        arraySinDuplicados.forEach(el => {
                            let filtro = arraySinDuplicados.filter(de => de.HOGAR_ID._text == el.HOGAR_ID._text)
                            if(filtro.length == 1){
                                arrcriterio.push(filtro)
                            }
                            if(filtro.length > 1){
                                filtro.forEach(pe => {
                                    if(pe.QH06._text == 2){
                                        arrcriterio.push(pe)
                                    }
                                });
                            }
                            //console.log(filtro.length)
                        });


                        // Quitar duplicados
                        var arraySinDuplicadosv2 = arrcriterio.flat().filter((objeto, indice, self) =>
                        indice === self.findIndex((o) =>
                            JSON.stringify(o) === JSON.stringify(objeto)
                        )
                        );

                        // Ordenar por el parámetro "valor"
                        arraySinDuplicadosv2.sort((a, b) => a.HOGAR_ID._text - b.HOGAR_ID._text);

                        console.log("dddd", arraySinDuplicadosv2)


                        mapcheck = arraySinDuplicadosv2.map(el => `<label class="${el.color} ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"><input type="checkbox" id="${el.PERSONA_ID._text}" value="${el.ID._text}" data-hogar="${el.HOGAR_ID._text}" data-infosalud="${el.infosalud}" data-prueba="${el.QH06._text == 1 || el.QH06._text == 2 && el.QH07._text>49 ? "solsal": "todo"}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"> 
                            ${el.QH02_1._text} - Hogar (${el.color.charAt(el.color.length - 1)})</label>`).join('')

                            let nuevoArray = arraySinDuplicadosv2.flat().map(objeto => {
                                delete objeto.infosalud;
                                delete objeto.color;
                                return objeto;
                            });    
                        arr = nuevoArray
                }

            }


            

            let divcheck = document.createElement('div');
            divcheck.setAttribute('class', 'flex items-center wrap')
            divcheck.innerHTML = mapcheck
            

            let botonProcesar = document.createElement('button')
            botonProcesar.setAttribute('class', 'w-full mt-6 text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">Red</button>')
            botonProcesar.textContent = 'Procesar'

            document.querySelector('#cajacheck').insertAdjacentElement('afterbegin', divcheck)
            document.querySelector('#cajacheck').insertAdjacentElement('beforeend', botonProcesar)

        })

        //let obj = {}


        document.querySelector('#cajacheck').addEventListener('click', e =>{
              if(/*e.target.nodeName == 'LABEL' ||*/ e.target.nodeName == 'INPUT' ){  

              console.log(e.target.value,e.target.getAttribute('id') /*, json2, json2.hasOwnProperty('Marcod'), Object.keys(json2)*/)

            //   Object.entries(json2).forEach(entry => {
            //     const [key, value] = entry;
            //     console.log(key, Object.keys(value)[1]);
            //   });
              console.log(json2)
              

              if(e.target.getAttribute('data-prueba') == "todo"){
                    Object.keys(json2).forEach(el => {
                        if(el.startsWith('CI') || el.startsWith('CARATULA_INDI') || el.startsWith('DISCAPA')/* || el.startsWith('CS') || el.startsWith('Sa') || el.startsWith('CAP04_') || el.startsWith('Seccion04_05')*/ ){
                            //console.log(el)
                            if(json2.hasOwnProperty(el)){

                                //json2[el].push('HOLA')
                                //console.log(Object.keys(json2[el])[1])

                                if(json2[el][Object.keys(json2[el])[1]].length){
                                    
                                    let filtro = json2[el][Object.keys(json2[el])[1]]
                                    .filter(pe=>pe.ID._text == e.target.value && pe.PERSONA_ID._text == e.target.getAttribute('id') && pe.HOGAR_ID._text == e.target.getAttribute('data-hogar'))

                                    // let filtro2 = json2[el][Object.keys(json2[el])[1]]
                                    // .filter(pe=>pe.ID._text == e.target.value && pe.QH200_REF_S4?.hasOwnProperty("_text"))
                                    // console.log("FILTRO NEW 2", filtro2)
                                    //console.log("devvv", json2[el][Object.keys(json2[el])[1]])

                                    // jsonFinal[el][Object.keys(json2[el])[1]].push(pe)

                                    if(jsonFinal[el]?.[Object.keys(json2[el])[1]] ){

                                        if(jsonFinal[el][Object.keys(json2[el])[1]].length ){
                                            //console.log('si es un array',jsonFinal[el][Object.keys(json2[el])[1]])
                                            jsonFinal[el][Object.keys(json2[el])[1]].push(filtro)
                                            jsonFinal[el][Object.keys(json2[el])[1]] =jsonFinal[el][Object.keys(json2[el])[1]].flat()
                                        }else{ 
                                            let valAinsertar = filtro
                                            let valInicial = jsonFinal[el][Object.keys(json2[el])[1]]
                                            jsonFinal[el][Object.keys(json2[el])[1]] = [valInicial, valAinsertar].flat()
                                            //console.log('no es un array')
                                        }

                                    }else{
                                        // console.log(filtro, 'ghhghgh')
                                            jsonFinal[el] = json2[el]
                                            jsonFinal[el][Object.keys(json2[el])[1]] = filtro.length == 1 ? filtro[0]:filtro
                                    }

                                    

                                    // filtro.forEach(pe => {
                                    //     // jsonFinal[el][Object.keys(json2[el])[1]].push(pe)
                                    //     if(jsonFinal[el][Object.keys(json2[el])[1]].length ){
                                    //        console.log('si es un array',jsonFinal[el][Object.keys(json2[el])[1]])
                                    //        jsonFinal[el][Object.keys(json2[el])[1]].push(pe)
                                    //     }else{
                                    //         let valAinsertar = json2[el][Object.keys(json2[el])[1]]
                                    //         let valInicial = jsonFinal[el][Object.keys(json2[el])[1]]
                                    //         jsonFinal[el][Object.keys(json2[el])[1]] = [valInicial, valAinsertar]
                                    //         console.log('no es un array')
                                    //     }
                                    // });
                                    //jsonFinal[el][Object.keys(json2[el])[1]].push(filtro)

                                    //console.log(jsonFinal[el][Object.keys(json2[el])[1]].flat())
                                    //jsonFinal[el][Object.keys(json2[el])[1]].flat()

                                }else{
                                //console.log(json2[el][Object.keys(json2[el])[1]])
                                //console.log('j', json2[el][Object.keys(json2[el])[1]])

                                let verificar =  json2[el][Object.keys(json2[el])[1]].ID._text == e.target.value 
                                && json2[el][Object.keys(json2[el])[1]].PERSONA_ID._text == e.target.getAttribute('id')
                                && json2[el][Object.keys(json2[el])[1]].HOGAR_ID._text == e.target.getAttribute('data-hogar')

                                if(verificar){
                                    //jsonFinal[el][Object.keys(json2[el])[1]] = ['hh']
                                    // let aarr = []

                                    // aarr.push(jsonFinal[el]?.[Object.keys(json2[el])[1]])

                                        if(jsonFinal[el]?.[Object.keys(json2[el])[1]] ){
                                            console.warn('si tiene el valor',jsonFinal[el],json2[el][Object.keys(json2[el])[1]])

                                            let valAinsertar = json2[el][Object.keys(json2[el])[1]]
                                            let valInicial = jsonFinal[el][Object.keys(json2[el])[1]]

                                            if(jsonFinal[el][Object.keys(json2[el])[1]].length){
                                                valInicial.push(valAinsertar)
                                                jsonFinal[el][Object.keys(json2[el])[1]] = valInicial
                                            }else{
                                                jsonFinal[el][Object.keys(json2[el])[1]] = [valInicial, valAinsertar]
                                            }
                                            

                                        }else{
                                            //console.log(json2[el][Object.keys(json2[el])[1]], "ggggg")
                                            jsonFinal[el] = json2[el]
                                        }
                                    

                                }
                                }
                                
                                // console.log(filtro)

                                //console.log( json2[el][Object.keys(json2[el])[1]].length)
                            }
                        }
                });
              }





              Object.keys(json2).forEach(el => {
                    if(el.startsWith('CSVISITA') || el.startsWith('Sa') || el.startsWith('CAP04_')){
                        //console.log(el)
                        if(json2.hasOwnProperty(el)){

                            //json2[el].push('HOLA')
                            //console.log(Object.keys(json2[el])[1])

                            if(json2[el][Object.keys(json2[el])[1]].length){
                                
                                let filtro = json2[el][Object.keys(json2[el])[1]]
                                .filter(pe=>pe.ID._text == e.target.value && pe.PERSONA_ID?._text == e.target.getAttribute('data-infosalud') && pe.HOGAR_ID._text == e.target.getAttribute('data-hogar'))


                                if(jsonFinal[el]?.[Object.keys(json2[el])[1]] ){

                                    if(jsonFinal[el][Object.keys(json2[el])[1]].length ){
                                        jsonFinal[el][Object.keys(json2[el])[1]].push(filtro)
                                        jsonFinal[el][Object.keys(json2[el])[1]] =jsonFinal[el][Object.keys(json2[el])[1]].flat()
                                    }else{ 
                                        let valAinsertar = filtro
                                        let valInicial = jsonFinal[el][Object.keys(json2[el])[1]]
                                        jsonFinal[el][Object.keys(json2[el])[1]] = [valInicial, valAinsertar].flat()
                                    }

                                }else{
                                        jsonFinal[el] = json2[el]
                                        jsonFinal[el][Object.keys(json2[el])[1]] = filtro.length == 1 ? filtro[0]:filtro
                                }

                            }else{
                             
                               let verificar =  json2[el][Object.keys(json2[el])[1]].ID._text == e.target.value 
                               && json2[el][Object.keys(json2[el])[1]].PERSONA_ID._text == e.target.getAttribute('data-infosalud')
                               && json2[el][Object.keys(json2[el])[1]].HOGAR_ID._text == e.target.getAttribute('data-hogar')

                               if(verificar){

                                    if(jsonFinal[el]?.[Object.keys(json2[el])[1]] ){
                                        console.warn('si tiene el valor',jsonFinal[el],json2[el][Object.keys(json2[el])[1]])

                                        let valAinsertar = json2[el][Object.keys(json2[el])[1]]
                                        let valInicial = jsonFinal[el][Object.keys(json2[el])[1]]

                                        if(jsonFinal[el][Object.keys(json2[el])[1]].length){
                                            valInicial.push(valAinsertar)
                                            jsonFinal[el][Object.keys(json2[el])[1]] = valInicial
                                        }else{
                                            jsonFinal[el][Object.keys(json2[el])[1]] = [valInicial, valAinsertar]
                                        }
                                         

                                    }else{
                                        jsonFinal[el] = json2[el]
                                    }
                                

                               }
                            }

                        }
                    }
              });






              if(e.target.getAttribute('data-hogar') > 1){
                    Object.keys(json2).forEach(el => {
                        if(el.startsWith('Hogar') || el.startsWith('Seccion01') || el.startsWith('Seccion03') || el == 'Visita'){
                            //console.log(el)
                            if(json2.hasOwnProperty(el)){

                                //json2[el].push('HOLA')
                                // console.log(Object.keys(json2[el])[1])
                                // console.log(json2[el][Object.keys(json2[el])[1]])

                                // if(json2[el][Object.keys(json2[el])[1]].length){
                                //     //console.log("es array")
                                //     let filtro = json2[el][Object.keys(json2[el])[1]]
                                //      .filter(pe=>pe.ID._text == e.target.value && pe.PERSONA_ID?._text == e.target.getAttribute('data-infosalud') 
                                //      && pe.HOGAR_ID._text == e.target.getAttribute('data-hogar'))

                                //     console.log("es array",filtro)  
                                // }else{
                                //     //console.log("es un obj")

                                //     let verificar =  json2[el][Object.keys(json2[el])[1]].ID._text == e.target.value 
                                //     && json2[el][Object.keys(json2[el])[1]].PERSONA_ID?._text == e.target.getAttribute('data-infosalud')
                                //     && json2[el][Object.keys(json2[el])[1]].HOGAR_ID?._text == e.target.getAttribute('data-hogar')

                                //     console.log("es un obj", verificar)
                                // }

                                //------------------------------------------------------------------

                                if(json2[el][Object.keys(json2[el])[1]].length){
                                    
                                    let filtro = json2[el][Object.keys(json2[el])[1]]
                                    .filter(pe=>pe.ID._text == e.target.value  && pe.HOGAR_ID._text == e.target.getAttribute('data-hogar'))


                                    if(jsonFinal[el]?.[Object.keys(json2[el])[1]] ){

                                        if(jsonFinal[el][Object.keys(json2[el])[1]].length ){
                                            jsonFinal[el][Object.keys(json2[el])[1]].push(filtro)
                                            jsonFinal[el][Object.keys(json2[el])[1]] =jsonFinal[el][Object.keys(json2[el])[1]].flat()
                                        }else{ 
                                            let valAinsertar = filtro
                                            let valInicial = jsonFinal[el][Object.keys(json2[el])[1]]
                                            jsonFinal[el][Object.keys(json2[el])[1]] = [valInicial, valAinsertar].flat()
                                        }

                                    }else{
                                            jsonFinal[el] = json2[el]
                                            jsonFinal[el][Object.keys(json2[el])[1]] = filtro.length == 1 ? filtro[0]:filtro
                                    }

                                }else{
                                
                                let verificar =  json2[el][Object.keys(json2[el])[1]].ID._text == e.target.value 
                                && json2[el][Object.keys(json2[el])[1]].HOGAR_ID?._text == e.target.getAttribute('data-hogar')

                                    if(verificar){

                                            if(jsonFinal[el]?.[Object.keys(json2[el])[1]] ){
                                                console.warn('si tiene el valor',jsonFinal[el],json2[el][Object.keys(json2[el])[1]])

                                                let valAinsertar = json2[el][Object.keys(json2[el])[1]]
                                                let valInicial = jsonFinal[el][Object.keys(json2[el])[1]]

                                                if(jsonFinal[el][Object.keys(json2[el])[1]].length){
                                                    valInicial.push(valAinsertar)
                                                    jsonFinal[el][Object.keys(json2[el])[1]] = valInicial
                                                }else{
                                                    jsonFinal[el][Object.keys(json2[el])[1]] = [valInicial, valAinsertar]
                                                }
                                                

                                            }else{
                                                jsonFinal[el] = json2[el]
                                            }
                                        

                                    }
                                }

                            }
                        }
                });
              }

              




            // Object.keys(json2).forEach(el => {
            //         if(el.startsWith('Seccion04_05')){
            //             //jsonFinal[el] = json2[el]

            //             let filtro = json2[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))
            //             console.log(filtro)

            //             // json2[el][Object.keys(json2[el])[1]] = []
            //             // json2[el][Object.keys(json2[el])[1]] = filtro
            //             // jsonFinal[el] = json2[el]

            //            // console.log("ff",json2[el][Object.keys(json2[el])[1]])
            //         } 
            //   })  





            if(e.target.getAttribute('data-prueba') == "todo"){
                    Object.keys(json2).forEach(el => {
                    if(el == "Seccion04_05"){
                        //jsonFinal[el] = json2[el]

                        
                        if(Array.isArray(json2[el][Object.keys(json2[el])[1]]) && !Array.isArray(jsonFinal[el][Object.keys(json2[el])[1]])){
                            console.log("es array json2 y no es arr final")
                            
                            let objfinal = jsonFinal[el][Object.keys(json2[el])[1]]

                            let arrayy = []
                            //let filtro = json2[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))

                            json2[el][Object.keys(json2[el])[1]].forEach(el => {
                                if(el.HOGAR_ID._text != objfinal.HOGAR_ID._text){
                                    arrayy.push(el)
                                } 

                                if(el.HOGAR_ID._text == objfinal.HOGAR_ID._text){
                                    if(el.hasOwnProperty('QH207') && objfinal.hasOwnProperty('QH207')){
                                        if(el.QH207._text == 1 && objfinal.QH207._text != 1){
                                            arrayy.push(el)
                                        }else if(el.QH207._text != 1 && objfinal.QH207._text == 1){
                                            arrayy.push(objfinal)
                                        }else{
                                            arrayy.push(objfinal)
                                        }
                                    }
                                }

                            });

                            jsonFinal[el][Object.keys(json2[el])[1]] = arrayy

                        }else if(Array.isArray(jsonFinal[el][Object.keys(json2[el])[1]]) && !Array.isArray(json2[el][Object.keys(json2[el])[1]])){
                            console.log("es array final y no es arr json2")

                            let obj2 = json2[el][Object.keys(json2[el])[1]]

                            let arrayy = []

                            jsonFinal[el][Object.keys(json2[el])[1]].forEach(el => {
                                if(el.HOGAR_ID._text != obj2.HOGAR_ID._text){
                                    arrayy.push(el)
                                } 

                                if(el.HOGAR_ID._text == obj2.HOGAR_ID._text){
                                    if(obj2.hasOwnProperty('QH207')){
                                        if(obj2.QS802A._text == 1){
                                            arrayy.push(obj2)
                                        }
                                    }
                                }

                            });

                            // console.log("obj2ffff", obj2)
                            // console.log("arrayyy", arrayy)

                            jsonFinal[el][Object.keys(json2[el])[1]] = arrayy
                            

                        }else if(Array.isArray(json2[el][Object.keys(json2[el])[1]]) && Array.isArray(jsonFinal[el][Object.keys(json2[el])[1]])){
                            console.log("los 2 son array")
                            // console.log("finalll", jsonFinal[el][Object.keys(json2[el])[1]])
                            // console.log("json222", json2[el][Object.keys(json2[el])[1]])

                                let filtro = json2[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))
                                let filtrofin = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))

                                let filtrofindifere = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text != e.target.value)
                                let filtrofindiferev2 = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.HOGAR_ID._text != e.target.getAttribute('data-hogar'))

                                // console.error("filtro", filtro)
                                // console.error("filtrofin", filtrofin)
                                // console.error("filtrofindifere", filtrofindifere)

                                if(filtrofin.length == 0){
                                    console.log("el hogar seleccionado no esta en el archivo subido")

                                    jsonFinal[el][Object.keys(json2[el])[1]] = [jsonFinal[el][Object.keys(json2[el])[1]], filtro].flat()

                                }else if(filtro.length>0 && filtrofin.length>0){
                                    console.log("el h")  
                                        // Recorrer los arreglos y reemplazar objetos
                                        console.log("finalll", filtro)
                                        console.log("json2", filtrofin)
                                        console.error("filtrofindifere", filtrofindifere)
                                        for (var i = 0; i < filtrofin.length; i++) {
                                            var objeto1 = filtrofin[i];
                                            var obj = filtro[i];
                                            
                                            
                                            // Verificar la condición para reemplazar
                                            if (objeto1?.QH207?._text != 1 && obj?.QH207?._text == 1 ) {
                                                // Obtener el objeto a reemplazar del array2
                                                var objeto2 = filtro[i];
                                                
                                                // Reemplazar objeto1 con objeto2
                                                filtrofin[i] = objeto2;
                                            }
                                        }

                                        jsonFinal[el][Object.keys(json2[el])[1]] = [filtrofindifere,filtrofindiferev2 , filtrofin].flat()
                                }else{
                                    console.log("json2 sin hogar seleccionado")
                                }

                        }else{
                            console.log("ninguno es array")
                            let objfinal = jsonFinal[el][Object.keys(json2[el])[1]]
                            let objson2 = json2[el][Object.keys(json2[el])[1]]

                            if(objfinal.hasOwnProperty('QH207') && objson2.hasOwnProperty('QH207')){
                                if (objfinal.QH207._text != 1 && objson2.QH207._text == 1 ) {

                                    jsonFinal[el][Object.keys(json2[el])[1]] = json2[el][Object.keys(json2[el])[1]]

                                }
                            }
                        }
                        
                    } 
                })
            }





            Object.keys(json2).forEach(el => {
                if(el == "CSSECCION_08"){
                    //jsonFinal[el] = json2[el]

                    
                    if(Array.isArray(json2[el][Object.keys(json2[el])[1]]) && !Array.isArray(jsonFinal[el][Object.keys(json2[el])[1]])){
                        console.log("es array json2 y no es arr final")
                        
                        let objfinal = jsonFinal[el][Object.keys(json2[el])[1]]

                        let arrayy = []
                        //let filtro = json2[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))

                        json2[el][Object.keys(json2[el])[1]].forEach(el => {
                            if(el.HOGAR_ID._text != objfinal.HOGAR_ID._text){
                                arrayy.push(el)
                            } 

                            if(el.HOGAR_ID._text == objfinal.HOGAR_ID._text){
                                if(el.hasOwnProperty('QS802A') && objfinal.hasOwnProperty('QS802A')){
                                    if(el.QS802A._text == 1 && objfinal.QS802A._text != 1){
                                        arrayy.push(el)
                                    }else if(el.QS802A._text != 1 && objfinal.QS802A._text == 1){
                                        arrayy.push(objfinal)
                                    }else{
                                        arrayy.push(objfinal)
                                    }
                                }
                            }

                        });

                        jsonFinal[el][Object.keys(json2[el])[1]] = arrayy

                    }else if(Array.isArray(jsonFinal[el][Object.keys(json2[el])[1]]) && !Array.isArray(json2[el][Object.keys(json2[el])[1]])){
                        console.log("es array final y no es arr json2")


                        let obj2 = json2[el][Object.keys(json2[el])[1]]

                        let arrayy = []

                        jsonFinal[el][Object.keys(json2[el])[1]].forEach(el => {
                            if(el.HOGAR_ID._text != obj2.HOGAR_ID._text){
                                arrayy.push(el)
                            } 

                            if(el.HOGAR_ID._text == obj2.HOGAR_ID._text){
                                if(obj2.hasOwnProperty('QS802A')){
                                    if(obj2.QS802A._text == 1){
                                        arrayy.push(obj2)
                                    }
                                }
                            }

                        });

                        // console.log("obj2ffff", obj2)
                        // console.log("arrayyy", arrayy)

                        jsonFinal[el][Object.keys(json2[el])[1]] = arrayy

                    }else if(Array.isArray(json2[el][Object.keys(json2[el])[1]]) && Array.isArray(jsonFinal[el][Object.keys(json2[el])[1]])){
                        console.log("los 2 son array")
                        // console.log("finalll", jsonFinal[el][Object.keys(json2[el])[1]])
                        // console.log("json222", json2[el][Object.keys(json2[el])[1]])

                            let filtro = json2[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))
                            let filtrofin = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))

                            let filtrofindifere = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text != e.target.value)
                            let filtrofindiferev2 = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.HOGAR_ID._text != e.target.getAttribute('data-hogar'))

                            // console.error("filtro", filtro)
                            // console.error("filtrofin", filtrofin)
                            // console.error("filtrofindifere", filtrofindifere)

                            if(filtrofin.length == 0){
                                console.log("el hogar seleccionado no esta en el archivo subidon")

                                jsonFinal[el][Object.keys(json2[el])[1]] = [jsonFinal[el][Object.keys(json2[el])[1]], filtro].flat()

                            }else if(filtro.length>0 && filtrofin.length>0){
                                console.log("el h")  
                                    // Recorrer los arreglos y reemplazar objetos
                                    console.log("finalll", filtro)
                                    console.log("json2", filtrofin)
                                    console.error("filtrofindifere", filtrofindifere)
                                    for (var i = 0; i < filtrofin.length; i++) {
                                        var objeto1 = filtrofin[i];
                                        var obj = filtro[i];
                                        
                                        
                                        // Verificar la condición para reemplazar
                                        if (objeto1?.QS802A?._text != 1 && obj?.QS802A?._text == 1 ) {
                                            // Obtener el objeto a reemplazar del array2
                                            var objeto2 = filtro[i];
                                            
                                            // Reemplazar objeto1 con objeto2
                                            filtrofin[i] = objeto2;
                                        }
                                    }

                                    jsonFinal[el][Object.keys(json2[el])[1]] = [filtrofindifere,filtrofindiferev2 , filtrofin].flat()
                            }else{
                                console.log("json2 sin hogar seleccionado")
                            }

                    }else{
                        console.log("ninguno es array")
                        let objfinal = jsonFinal[el][Object.keys(json2[el])[1]]
                        let objson2 = json2[el][Object.keys(json2[el])[1]]

                        if( objson2.hasOwnProperty('QS802A')){
                            if ( objson2.QS802A._text == 1 ) {

                                jsonFinal[el][Object.keys(json2[el])[1]] = json2[el][Object.keys(json2[el])[1]]

                            }
                        }
                    }
                    
                } 
            })



            // Object.keys(json2).forEach(el => {
            //     if(el == "CSSECCION_08"){

            //         if(json2[el][Object.keys(json2[el])[1]].length &&  jsonFinal[el][Object.keys(json2[el])[1]].length){

            //             let filtro = json2[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))
            //             let filtrofin = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value && el.HOGAR_ID._text == e.target.getAttribute('data-hogar'))
                        
            //             let filtrofindifere = jsonFinal[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text != e.target.value )

            //             if(filtro.length>0 && filtrofin.length>0 /*&& filtrofindifere.length>0*/){
            //                 // Recorrer los arreglos y reemplazar objetos
            //                 for (var i = 0; i < filtrofin.length; i++) {
            //                     var objeto1 = filtrofin[i];
            //                     var obj = filtro[i];
                                
            //                     // Verificar la condición para reemplazar
            //                     if (objeto1?.QS802A?._text != 1 && obj?.QS802A?._text == 1 ) {
            //                         // Obtener el objeto a reemplazar del array2
            //                         var objeto2 = filtro[i];
                                    
            //                         // Reemplazar objeto1 con objeto2
            //                         filtrofin[i] = objeto2;
            //                     }
            //                 }
            //                 jsonFinal[el][Object.keys(json2[el])[1]] = [filtrofindifere, filtrofin].flat()
            //             }

                        
            //         }else{

            //             let verificar =  json2[el][Object.keys(json2[el])[1]].ID._text == e.target.value 
            //                    && json2[el][Object.keys(json2[el])[1]].PERSONA_ID._text == e.target.getAttribute('data-infosalud')
            //                    && json2[el][Object.keys(json2[el])[1]].HOGAR_ID._text == e.target.getAttribute('data-hogar')

            //                     if(verificar){

            //                         if(jsonFinal[el]?.[Object.keys(json2[el])[1]] ){
            //                             console.warn('si tiene el valor',jsonFinal[el],json2[el][Object.keys(json2[el])[1]])


            //                             if(json2[el][Object.keys(json2[el])[1]]?.QS802A._text == 1 && jsonFinal[el][Object.keys(json2[el])[1]]?.QS802A?._text != 1){
            //                                 jsonFinal[el][Object.keys(json2[el])[1]] = json2[el][Object.keys(json2[el])[1]] 
            //                             }

            //                         }else{
            //                             jsonFinal[el] = json2[el]
            //                         }
                                

            //                     }

            //         }

                    

            //     } 
            // })

            console.log("jsonfinal", jsonFinal)



            // var array = [{id: 1, nombre: 'objeto1'}, {id: 2, nombre: 'objeto2'}, {id: 3, nombre: 'objeto3'}];
            // var objetoAEliminar = {id: 2, nombre: 'objeto2'};

            // var index = array.indexOf(objetoAEliminar);
            // if (index > -1) {
            // array.splice(index, 1);
            // }

            // console.log(array);



            //   Object.keys(json2).forEach(el => {
            //         if(el.startsWith('Seccion04_05')){

            //             console.log(el)
            //             // let filtro = json2[el][Object.keys(json2[el])[1]].filter(el=> el.ID._text == e.target.value)
            //             // json2[el][Object.keys(json2[el])[1]] = []
            //             // json2[el][Object.keys(json2[el])[1]] = filtro
                        
            //             // jsonFinal[el] = json2[el]
            //         } 
            //   })


           
              
            }

            if( e.target.nodeName == 'BUTTON' ){ 
                console.error(jsonFinal)
                //exportToJsonFile(jsonFinal)


                
                const ss = json2xml(jsonFinal, {compact: true, ignoreComment: true, spaces: 4});
                
                let concartenar = `<?xml version='1.0' encoding='ISO-8859-1' standalone='yes' ?>
                    <ENDES>${ss}</ENDES>`

                //console.log(concartenar)
                exportarEnZip(concartenar, nomfinal)
                //exportXML(concartenar)

                //   setTimeout(() => {
                //     window.location.reload();  
                //   }, 3500);
            }
        })


        ////////////////////////////////////////////////////////////////////////////////

    


        //////////////////////////////////////////////////////////////////////////////

        function exportToJsonFile(jsonData) {
            let dataStr = JSON.stringify(jsonData);
            let dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

            let exportFileDefaultName = 'data.json';

            let linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }


        function exportXML(data){
            var pseudoelement = document.createElement("a");

                var filename = nomfinal;
                var pseudoelement = document.createElement("a");
                var blob = new Blob([data ], { type: "text/plain" });

                pseudoelement.setAttribute("href", window.URL.createObjectURL(blob));
                pseudoelement.setAttribute("download", filename);

                pseudoelement.dataset.downloadurl = ["text/plain", pseudoelement.download, pseudoelement.href].join(":");
                pseudoelement.draggable = true;
                pseudoelement.classList.add("dragout");

                pseudoelement.click();
        }


        function exportarEnZip(xmlDatos,data){
            var zip = new JSZip();
                zip.file(`${data}`, xmlDatos,{ type: "text/plain" });
                //var img = zip.folder("images");
                //img.file("smile.gif", imgData, {base64: true});
                zip.generateAsync({type:"blob"})
                .then(function(content) {
                    // see FileSaver.js
                    saveAs(content, `${data.substring(0,data.indexOf("."))}.zip`);
                });
        }

    </script>



<script>
    var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

    // Change the icons inside the button based on previous settings
    if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        themeToggleLightIcon.classList.remove('hidden');
    } else {
        themeToggleDarkIcon.classList.remove('hidden');
    }

    var themeToggleBtn = document.getElementById('theme-toggle');

    themeToggleBtn.addEventListener('click', function() {

        // toggle icons inside button
        themeToggleDarkIcon.classList.toggle('hidden');
        themeToggleLightIcon.classList.toggle('hidden');

        // if set via local storage previously
        if (localStorage.getItem('color-theme')) {
            if (localStorage.getItem('color-theme') === 'light') {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            }

        // if NOT set via local storage previously
        } else {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            }
        }
        
    });
</script>



<script src="index.js"></script>
</body>
</html>